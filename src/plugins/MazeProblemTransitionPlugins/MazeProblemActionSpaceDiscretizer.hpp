#ifndef _SKD_ACTION_SPACE_DISCRETIZER_
#define _SKD_ACTION_SPACE_DISCRETIZER_
#include "../MazeProblemUtils/MazeProblemGeneralUtils.hpp"
#include "oppt/robotHeaders/ActionSpaceDiscretizer.hpp"

namespace oppt {

class MazeProblemActionSpaceDiscretizer : public ActionSpaceDiscretizer {
public:
  MazeProblemActionSpaceDiscretizer(ActionSpaceSharedPtr &actionSpace)
      : ActionSpaceDiscretizer(actionSpace) {
    LOGGING("Custom Maze Action Space Discretizer");
  }

  virtual ~MazeProblemActionSpaceDiscretizer() {}

  virtual std::vector<ActionSharedPtr>
  getAllActionsInOrder(const unsigned int &numStepsPerDimension) const {
    std::vector<ActionSharedPtr> allActionsOrdered_;
    long code = 0;

    // Append open left action representation in vector form
    VectorFloat openLeftActionVec{MAZE_PROBLEM_ACTIONS::MOVE_LEFT};
    ActionSharedPtr openLeftAction(new DiscreteVectorAction(openLeftActionVec));
    openLeftAction->as<DiscreteVectorAction>()->setBinNumber(code);
    code++;
    allActionsOrdered_.push_back(openLeftAction);

    VectorFloat openUpActionVec{MAZE_PROBLEM_ACTIONS::MOVE_UP};
    ActionSharedPtr openUpAction(new DiscreteVectorAction(openUpActionVec));
    openUpAction->as<DiscreteVectorAction>()->setBinNumber(code);
    code++;
    allActionsOrdered_.push_back(openUpAction);

    VectorFloat openRightActionVec{MAZE_PROBLEM_ACTIONS::MOVE_RIGHT};
    ActionSharedPtr openRightAction(
        new DiscreteVectorAction(openRightActionVec));
    openRightAction->as<DiscreteVectorAction>()->setBinNumber(code);
    code++;
    allActionsOrdered_.push_back(openRightAction);

    VectorFloat openDownActionVec{MAZE_PROBLEM_ACTIONS::MOVE_DOWN};
    ActionSharedPtr openDownAction(new DiscreteVectorAction(openDownActionVec));
    openDownAction->as<DiscreteVectorAction>()->setBinNumber(code);
    code++;
    allActionsOrdered_.push_back(openDownAction);

    // Print size of action space
    std::cout << "SIZE OF THE ACTION SPACE IS " << allActionsOrdered_.size()
              << std::endl;
    getchar();

    // Print out list of actions to verify correctness
    // // Print actions
    std::cout << "PRINTING ACTION SPACE " << std::endl;
    for (auto actions : allActionsOrdered_) {
      actions->print(cout);
      std::cout << std::endl;
    }

    getchar();

    return allActionsOrdered_;
  }
};

} // namespace oppt

#endif
